<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Account Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      .sidebar-nav {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 24px;
      }

      .sidebar-nav h5 {
        font-weight: 600;
        margin-bottom: 1.5rem;
      }

      .sidebar-nav .nav-link {
        display: flex;
        align-items: center;
        padding: 10px 12px;
        border-radius: 6px;
        color: #4b5563;
        font-weight: 500;
        text-decoration: none;
        transition: background 0.2s;
        position: relative;
      }

      .sidebar-nav .nav-link i {
        font-size: 1rem;
        margin-right: 10px;
      }

      .sidebar-nav .nav-link.active {
        background-color: #f1f5f1;
        color: #000;
        font-weight: 600;
      }

      .sidebar-nav .nav-link.active::before {
        content: "";
        position: absolute;
        left: -12px;
        top: 50%;
        transform: translateY(-50%);
        height: 24px;
        width: 4px;
        background-color: #22c55e;
        border-radius: 2px;
      }

      .sidebar-nav .nav-link.logout {
        color: #dc3545;
      }

      .sidebar-nav .nav-link:hover:not(.active) {
        background-color: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <div id="header"></div>
    <main>
      <div class="container py-5">
        <div class="row">
          <!-- Sidebar -->
          <div class="col-md-3 mb-4">
            <div class="sidebar-nav shadow-sm">
              <h5>Account</h5>
              <ul class="list-unstyled mb-0">
                <li>
                  <a href="#" class="nav-link active" data-tab="dashboard-tab"
                    ><i class="bi bi-grid"></i> Dashboard</a
                  >
                </li>
                <li>
                  <a href="#" class="nav-link" data-tab="orders-tab"
                    ><i class="bi bi-arrow-repeat"></i> Orders</a
                  >
                </li>
                <li>
                  <a href="#" class="nav-link" data-tab="wishlist-tab"
                    ><i class="bi bi-heart"></i> Wishlist</a
                  >
                </li>
                <li>
                  <a href="#" class="nav-link" data-tab="cart-tab"
                    ><i class="bi bi-cart3"></i> Cart</a
                  >
                </li>
                <li>
                  <a href="#" class="nav-link" data-tab="settings-tab"
                    ><i class="bi bi-gear"></i> Settings</a
                  >
                </li>
                <li>
                  <a href="/account/logout" class="nav-link logout"
                    ><i class="bi bi-box-arrow-right"></i> Logout</a
                  >
                </li>
              </ul>
            </div>
          </div>
          <!-- Main Content Tabs -->
          <div class="col-md-9">
            <div id="dashboard-tab" class="tab-section"></div>
            <div id="orders-tab" class="tab-section d-none"></div>
            <div id="wishlist-tab" class="tab-section d-none"></div>
            <div id="cart-tab" class="tab-section d-none"></div>
            <div id="settings-tab" class="tab-section d-none"></div>
          </div>
        </div>
      </div>
    </main>
    <div id="footer"></div>
    <script>
      // Load header và footer
      fetch("../../header.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("header").innerHTML = data;
        });
      fetch("../../footer.html")
        .then((res) => res.text())
        .then((data) => {
          document.getElementById("footer").innerHTML = data;
        });

      // Load các section HTML vào tab-section
      function loadTab(tabId, file) {
        fetch(file)
          .then((res) => res.text())
          .then((html) => {
            document.getElementById(tabId).innerHTML = html;
          });
      }
      // Load mặc định dashboard
      loadTab("dashboard-tab", "section_dashboard.html");
      loadTab("orders-tab", "section_orders.html");
      loadTab("wishlist-tab", "section_wishlist.html");
      loadTab("cart-tab", "section_wishlist.html"); // demo, bạn có thể tạo file riêng cho cart
      loadTab("settings-tab", "section_settings.html");

      // Tab switching
      function showTab(tabId) {
        document
          .querySelectorAll(".tab-section")
          .forEach((el) => el.classList.add("d-none"));
        document.getElementById(tabId).classList.remove("d-none");
        document
          .querySelectorAll(".nav-link[data-tab]")
          .forEach((link) => link.classList.remove("active"));
        const activeLink = document.querySelector(
          `.nav-link[data-tab="${tabId}"]`
        );
        if (activeLink) activeLink.classList.add("active");
      }
      document.querySelectorAll(".nav-link[data-tab]").forEach((link) => {
        link.addEventListener("click", function (e) {
          e.preventDefault();
          showTab(this.getAttribute("data-tab"));
        });
      });
      // Mặc định show dashboard
      showTab("dashboard-tab");
    </script>
  </body>
</html>
