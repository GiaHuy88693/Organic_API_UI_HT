<?php include 'app/views/shares/header.php'; ?>
<div id="header"></div>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Poppins', Arial, Helvetica, sans-serif !important;
    background-color: #f1f3f5;
  }
  .checkout-page {
    max-width: 1140px;
    margin: 3rem auto;
  }
  .checkout-left, .checkout-right {
    background: #fff;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
  }
  h2.section-title {
    font-weight: 700;
    font-size: 1.4rem;
    margin-bottom: 1.2rem;
  }
  .form-label {
    font-weight: 600;
    margin-bottom: .3rem;
  }
  .form-control, .form-select {
    border-radius: 8px;
    border: 1.5px solid #ced4da;
    transition: border 0.3s ease, box-shadow 0.3s ease;
  }
  .form-control:focus, .form-select:focus {
    border-color: #198754;
    box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
  }
  .summary-item {
    display: flex;
    justify-content: space-between;
    padding: .4rem 0;
    font-size: 14px;
  }
  .summary-item.total {
    font-weight: 700;
    font-size: 1.2rem;
    border-top: 1px solid #ccc;
    margin-top: 1rem;
    padding-top: 1rem;
  }
  .checkout-btn {
    border-radius: 999px;
    padding: .6rem 1.8rem;
    background-color: #198754;
    color: white;
    border: none;
    font-weight: 600;
  }
  .checkout-btn:hover {
    background-color: #157347;
  }
  .back-link {
    font-size: 14px;
    text-decoration: underline;
  }
  .address-card {
    cursor: pointer;
    transition: all 0.2s ease;
  }
  input[name="address_id"]:checked + .address-card {
    border: 2px solid #198754;
    background-color: #e9f7ef;
  }
</style>

<div class="container checkout-page">
  <div class="row g-4">
    <!-- Left Column -->
    <div class="col-md-7">
      <div class="checkout-left">
        <h2 class="section-title">Thông tin giao hàng</h2>
        <form method="POST" action="#" novalidate>
          <div class="mb-3">
            <label class="form-label">Họ và tên <span class="text-danger">*</span></label>
            <input type="text" name="name" class="form-control" value="Nguyễn Văn A" readonly>
          </div>

          <div class="mb-3">
            <label class="form-label">Số điện thoại <span class="text-danger">*</span></label>
            <input type="tel" name="phone" class="form-control" value="0901234567" readonly>
          </div>

          <div class="mb-4">
            <label class="form-label">Chọn địa chỉ nhận hàng <span class="text-danger">*</span></label>
            <div class="d-flex flex-column gap-3">
              <label>
                <input type="radio" name="address_id" value="1" required hidden checked>
                <div class="border rounded p-3 address-card">
                  <div class="fw-bold">123 Đường ABC</div>
                  <div>Bình Thạnh, Việt Nam</div>
                  <small class="text-muted">(Nhà riêng)</small>
                </div>
              </label>
              <label>
                <input type="radio" name="address_id" value="2" required hidden>
                <div class="border rounded p-3 address-card">
                  <div class="fw-bold">456 Đường XYZ</div>
                  <div>Quận 1, Việt Nam</div>
                  <small class="text-muted">(Cơ quan)</small>
                </div>
              </label>
            </div>
          </div>

          <div class="mt-4 d-flex justify-content-between">
            <a href="/Product/cart" class="text-secondary back-link">← Quay lại giỏ hàng</a>
            <button type="submit" class="checkout-btn">
              Xác nhận & Thanh toán
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Right Column -->
    <div class="col-md-5">
      <div class="checkout-right">
        <h2 class="section-title">Đơn hàng của bạn</h2>
        <div class="summary-item">
          <div>
            <div>Táo hữu cơ</div>
            <div class="text-muted small">x2</div>
          </div>
          <div>70,000đ</div>
        </div>
        <div class="summary-item">
          <div>Cam hữu cơ</div>
          <div class="text-muted small">x1</div>
          <div>45,000đ</div>
        </div>
        <div class="summary-item">
          <div>Phí vận chuyển</div>
          <div>0đ</div>
        </div>
        <div class="summary-item total">
          <div>Tổng cộng</div>
          <div>115,000đ</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="footer"></div>
<script>
  (() => {
    'use strict';
    const forms = document.querySelectorAll('form');
    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  })();

  // Load header và footer
  fetch("/src/header.html")
    .then((res) => res.text())
    .then((data) => {
      document.getElementById("header").innerHTML = data;
    });

  fetch("/src/footer.html")
    .then((res) => res.text())
    .then((html) => (document.getElementById("footer").innerHTML = html));
</script>
